# Agent Orchestration

---

## ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§ï¼šSkill-First å·¥ä½œæµ

**æ¯æ¬¡æ”¶åˆ°ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œå¿…é¡»å…ˆé—®è‡ªå·±ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿™ä¸ªä»»åŠ¡æ˜¯å¦æ¶‰åŠï¼šåˆ†æ/è§„åˆ’/ç¼–ç /å®¡æŸ¥/è°ƒè¯•/ç ”ç©¶ï¼Ÿ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼ æ˜¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â›” åœæ­¢ï¼å¿…é¡»å…ˆè°ƒç”¨ Skill å·¥å…·                           â”‚
â”‚                                                         â”‚
â”‚  Skill tool â†’ skill: "brainstorming" æˆ– "find-skills"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŒ‰ Skill æŒ‡å¯¼æ‰§è¡Œä»»åŠ¡                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»»åŠ¡ç±»å‹ â†’ Skill æ˜ å°„è¡¨

| ä»»åŠ¡ç±»å‹ | å¿…é¡»è°ƒç”¨çš„ Skill | ç¤ºä¾‹ |
|----------|-----------------|------|
| æ–°åŠŸèƒ½å¼€å‘ | `brainstorming` â†’ `writing-plans` | "æ·»åŠ XXåŠŸèƒ½" |
| Bug ä¿®å¤ | `systematic-debugging` | "ä¿®å¤XXé—®é¢˜" |
| ä»£ç é‡æ„ | `brainstorming` â†’ `writing-plans` | "é‡æ„XXæ¨¡å—" |
| çŸ¥è¯†æ”¶é›†/ç ”ç©¶ | `brainstorming` æˆ– `find-skills` | "æ”¶é›†XXèµ„æ–™" |
| ä»£ç å®¡æŸ¥ | `requesting-code-review` | "å®¡æŸ¥è¿™æ®µä»£ç " |
| æµ‹è¯•ç¼–å†™ | `tdd-workflow` | "å†™XXæµ‹è¯•" |
| ä¸ç¡®å®šç”¨ä»€ä¹ˆ | `find-skills` | "æ€ä¹ˆXX" |

### å¿«é€Ÿåˆ¤æ–­æ ‡å‡†

**éœ€è¦ Skill**:
- âœ… ä»»åŠ¡æè¿°åŒ…å«"å®ç°"ã€"æ·»åŠ "ã€"ä¿®å¤"ã€"ä¼˜åŒ–"ã€"æ”¶é›†"ã€"åˆ†æ"
- âœ… éœ€è¦å¤šä¸ªæ­¥éª¤å®Œæˆ
- âœ… æ¶‰åŠä»£ç ä¿®æ”¹æˆ–ç”Ÿæˆ
- âœ… éœ€è¦ç ”ç©¶æˆ–æ¢ç´¢

**ä¸éœ€è¦ Skillï¼ˆå¯ç›´æ¥æ‰§è¡Œï¼‰**:
- âŒ ç®€å•æ–‡ä»¶è¯»å–ï¼ˆ"è¯»ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶"ï¼‰
- âŒ ç”¨æˆ·æ˜ç¡®è¯´"è·³è¿‡ skills"ã€"ç›´æ¥åš"
- âŒ çº¯æ–‡æ¡£ç¼–è¾‘ï¼ˆ.md æ— ä»£ç é€»è¾‘ï¼‰
- âŒ Git æ“ä½œï¼ˆcommit/push/statusï¼‰
- âŒ å•è¡Œé…ç½®ä¿®æ”¹

---

## âš ï¸ å¼ºåˆ¶è§„åˆ™ï¼šä»»åŠ¡å¼€å§‹å‰æ£€æŸ¥ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

**åœ¨ä»»ä½•å“åº”ä¹‹å‰ï¼Œå¿…é¡»æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š**

```
æ”¶åˆ°ç”¨æˆ·è¯·æ±‚
         â†“
é—®è‡ªå·±ï¼šè¿™æ˜¯å¦æ¶‰åŠ åˆ†æ/è§„åˆ’/ç¼–ç /å®¡æŸ¥/è°ƒè¯•ï¼Ÿ
         â†“ æ˜¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½¿ç”¨ using-superpowers skill   â”‚
â”‚ ï¼ˆæˆ– find-skills æŸ¥æ‰¾é€‚ç”¨æŠ€èƒ½ï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹©å…·ä½“ skill                  â”‚
â”‚ - brainstorming (æ¢ç´¢éœ€æ±‚)      â”‚
â”‚ - writing-plans (åˆ¶å®šè®¡åˆ’)      â”‚
â”‚ - tdd (æµ‹è¯•é©±åŠ¨å¼€å‘)            â”‚
â”‚ - systematic-debugging (è°ƒè¯•)   â”‚
â”‚ - å…¶ä»–é€‚ç”¨çš„ skill              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
æŒ‰ skill æµç¨‹æ‰§è¡Œ
```

**ç¦æ­¢è¡Œä¸ºï¼ˆæœªç» skill æŒ‡å¯¼ï¼‰ï¼š**
- âŒ ç›´æ¥ç”¨ Explore agent åˆ†æä»£ç 
- âŒ ç›´æ¥ç”¨ Bash/Grep/Read æœç´¢æ–‡ä»¶
- âŒ ç›´æ¥è°ƒç”¨ mcp__codex__codex ç¼–ç 
- âŒ ç›´æ¥è¾“å‡ºåˆ†æç»“æœæˆ–å»ºè®®
- âŒ ç›´æ¥å¯åŠ¨ Task å­ä»£ç†æ‰§è¡Œå¤æ‚ä»»åŠ¡

**å”¯ä¸€ä¾‹å¤–ï¼š**
- ç®€å•æ–‡ä»¶è¯»å–è¯·æ±‚ï¼ˆ"è¯»ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶"ï¼‰
- ç”¨æˆ·æ˜ç¡®è¯´"è·³è¿‡ skills"
- çº¯æ–‡æ¡£/é…ç½®æ–‡ä»¶ç¼–è¾‘ï¼ˆ.md/.json/.yamlï¼Œæ— é€»è¾‘ï¼‰

---

## Claude + Codex åŒè§’è‰²åä½œä½“ç³»

### è§’è‰²åˆ†å·¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ· (äº§å“è´Ÿè´£äºº)                       â”‚
â”‚              æå‡ºéœ€æ±‚ Â· æœ€ç»ˆå†³ç­– Â· éªŒæ”¶ç¡®è®¤                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ éœ€æ±‚è¾“å…¥
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Claude (æ¶æ„å¸ˆ / é¡¹ç›®ç»ç†)                    â”‚
â”‚                                                         â”‚
â”‚  ğŸ“‹ éœ€æ±‚åˆ†æ â†’ ğŸ“ æ¶æ„è®¾è®¡ â†’ ğŸ§© ä»»åŠ¡æ‹†åˆ† â†’ ğŸ“ ç¼–å†™è®¡åˆ’     â”‚
â”‚  ğŸ” ä»£ç å®¡æŸ¥ â†’ ğŸ› é—®é¢˜è¯Šæ–­ â†’ âœ… éªŒæ”¶æµ‹è¯• â†’ ğŸ“¦ Git æäº¤     â”‚
â”‚                                                         â”‚
â”‚  åŸåˆ™ï¼šåªåŠ¨è„‘ï¼Œä¸åŠ¨æ‰‹å†™ä»£ç                                  â”‚
â”‚  å·¥å…·ï¼šSkills å…¨å¥— + Codex MCP                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ mcp__codex__codex "å…·ä½“ç¼–ç æŒ‡ä»¤"
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Codex (é«˜çº§ç¨‹åºå‘˜)                            â”‚
â”‚                                                         â”‚
â”‚  ğŸ’» ç¼–å†™ä»£ç  â†’ ğŸ§ª ç¼–å†™æµ‹è¯• â†’ ğŸ” åˆ†æ Bug â†’ ğŸ”§ ä¿®å¤ Bug     â”‚
â”‚                                                         â”‚
â”‚  åŸåˆ™ï¼šä¸¥æ ¼æŒ‰æŒ‡ä»¤æ‰§è¡Œï¼Œè¾“å‡ºé«˜è´¨é‡ä»£ç                         â”‚
â”‚  èŒƒå›´ï¼šæ‰€æœ‰ src/ ä¸‹çš„ä»£ç å˜æ›´                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Claude å­ä»£ç† (ç”¨äºå®¡æŸ¥å’Œè§„åˆ’)

Located in `~/.claude/agents/`:

| Agent | Purpose | When to Use |
|-------|---------|-------------|
| planner | Implementation planning | Complex features, refactoring |
| architect | System design | Architectural decisions |
| tdd-guide | Test-driven development | New features, bug fixes |
| code-reviewer | Code review | After Codex writes code |
| security-reviewer | Security analysis | Before commits |
| build-error-resolver | Fix build errors | When build fails |
| e2e-runner | E2E testing | Critical user flows |
| refactor-cleaner | Dead code cleanup | Code maintenance |
| doc-updater | Documentation | Updating docs |

---

## Codex MCP è°ƒç”¨è§„èŒƒ (CRITICAL)

### MANDATORY å‚æ•°è¦æ±‚

**æ¯æ¬¡è°ƒç”¨ Codex MCP å¿…é¡»åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š**

```javascript
mcp__codex__codex({
  model: "gpt-5.3-codex",           // å¿…é¡»ä½¿ç”¨æ­¤æ¨¡å‹
  sandbox: "danger-full-access",     // å¿…é¡»ä½¿ç”¨æ­¤æ²™ç®±
  approval-policy: "never",          // å¿…é¡»ä½¿ç”¨æ­¤ç­–ç•¥
  prompt: "<ç»“æ„åŒ–ç¼–ç æŒ‡ä»¤>"
})
```

**âŒ ç»ä¸å…è®¸ï¼š**
- ä½¿ç”¨å…¶ä»–æ¨¡å‹åç§°
- çœç•¥ä»»ä½•å‚æ•°
- ä½¿ç”¨ä¸åŒçš„ sandbox æˆ– approval-policy å€¼

### ä¼šè¯ç®¡ç†

```javascript
// é¦–æ¬¡è°ƒç”¨
mcp__codex__codex({
  model: "gpt-5.3-codex",
  sandbox: "danger-full-access",
  approval-policy: "never",
  prompt: "<ç¼–ç æŒ‡ä»¤>"
})
// ä¿å­˜ conversationId

// åç»­è°ƒç”¨
mcp__codex__codex_reply({
  conversationId: "<ä¿å­˜çš„ ID>",
  prompt: "<ä¸‹ä¸€æ­¥æŒ‡ä»¤>"
})
```

---

## ä»»åŠ¡è·¯ç”±çŸ©é˜µ (Codex-First)

| ä»»åŠ¡ç±»å‹ | æ‰§è¡Œè€… | åŸå›  |
|---------|--------|------|
| ä»£ç ä¿®æ”¹ | **Codex** | å¼ºå¤§çš„ä»£ç ç”Ÿæˆèƒ½åŠ› |
| å•æ–‡ä»¶ç¼–è¾‘ | **Codex** | å³ä½¿ <50 è¡Œä¹Ÿç”¨ Codex |
| å¤šæ–‡ä»¶é‡æ„ | **Codex** | å…¨å±€ç†è§£èƒ½åŠ›å¼º |
| æ–°åŠŸèƒ½å¼€å‘ | **Codex** | å¼ºå¤§çš„ç”Ÿæˆèƒ½åŠ› |
| Bug ä¿®å¤ | **Codex** | å¼ºå¤§çš„æœç´¢+ä¿®å¤èƒ½åŠ› |
| å¾®å°å˜æ›´ | Claude | é”™å­—ã€æ³¨é‡Šã€ç®€å•é…ç½® (<20 è¡Œ) |
| éä»£ç å·¥ä½œ | Claude | çº¯ .md/.json/.yaml (æ— é€»è¾‘) |
| æ¶æ„è®¾è®¡ | Claude | è§„åˆ’èƒ½åŠ›æ›´å¼º |

---

## è°ƒç”¨ Codex çš„æŒ‡ä»¤æ¨¡æ¿

```markdown
## Context
- Tech Stack: [æŠ€æœ¯æ ˆ]
- Files: [è·¯å¾„]: [ç”¨é€”]
- Reference: [å‚è€ƒæ–‡ä»¶è·¯å¾„]

## Task
[ä¸€å¥è¯æè¿°è¦åšä»€ä¹ˆ]

## å…·ä½“è¦æ±‚
1. [è¦æ±‚1]
2. [è¦æ±‚2]
3. [è¦æ±‚3]

## Constraints
- Must preserve: [ç°æœ‰è¡Œä¸º]
- Must not break: [APIs/åŠŸèƒ½]
- ä»£ç æ³¨é‡Šä½¿ç”¨ä¸­æ–‡
- ä¸è¦ä¿®æ”¹ä¸ç›¸å…³çš„æ–‡ä»¶

## Acceptance
- [ ] pnpm build é€šè¿‡
- [ ] [å…·ä½“åŠŸèƒ½éªŒè¯ç‚¹]

## Files to Modify
- [path] - [ä¿®æ”¹å†…å®¹]
```

---

## Claude å­ä»£ç†ä½¿ç”¨æ—¶æœº

æ— éœ€ç”¨æˆ·ç¡®è®¤ï¼Œè‡ªåŠ¨ä½¿ç”¨ï¼š
1. å¤æ‚åŠŸèƒ½è¯·æ±‚ â†’ **planner** è§„åˆ’
2. Codex å®Œæˆç¼–ç å â†’ **code-reviewer** å®¡æŸ¥
3. Bug ä¿®å¤æˆ–æ–°åŠŸèƒ½ â†’ **tdd-guide** æŒ‡å¯¼
4. æ¶æ„å†³ç­– â†’ **architect** åˆ†æ

---

## å¹¶è¡Œä»»åŠ¡æ‰§è¡Œ

ALWAYS use parallel Task execution for independent operations:

```markdown
# GOOD: Parallel execution
Launch 3 agents in parallel:
1. Agent 1: Security analysis of auth module
2. Agent 2: Performance review of cache system
3. Agent 3: Type checking of utilities

# BAD: Sequential when unnecessary
First agent 1, then agent 2, then agent 3
```

---

## å¤šè§†è§’åˆ†æ

For complex problems, use split role sub-agents:
- Factual reviewer
- Senior engineer
- Security expert
- Consistency reviewer
- Redundancy checker
